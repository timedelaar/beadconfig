(function(){function n(n){function u(){r();n.getSettings().then(function(n){t.settings=n.data.settings;t.letters=n.data.letters;t.colors=n.data.colors;t.colors&&t.colors.length>0&&(t.color_line=t.colors[0].slug);i()},function(n){console.error("error fetching settings",n);i()})}function f(u){var f,h,e,o,c,s,l;for(r(),f=0,h=t.colors.length;f<h;f++)for(e=t.colors[f],o=0,c=t.letters.length;o<c;o++)s=t.letters[o],l=e.slug+"_"+s,u[l].$dirty&&n.uploadImage(t.settings.beads[e.slug][s].image,e.slug,s,t.settings.general.letter_bead_product).then(function(){},function(n){console.error("error uploading image",n)},function(){});n.saveSettings(t.settings).then(function(){i()},function(n){console.error("error saving settings",n);i()})}function r(){var n=angular.element('<div class="loader-background"><div class="loader"><\/div>'),t=angular.element("body");t.append(n)}function i(){angular.element(".loader-background").remove()}var t=this;t.settings={general:{},styling:{},beads:{}};t.color_line="";t.save=f;angular.element(document).ready(u)}angular.module("beadConfigSettings",["ngFileUpload"]).controller("beadConfigSettings",["beadConfigSettingsService",n])})(),function(){function n(n,t){function r(){return n({method:"GET",url:"/wp-json/bead-config/v1/plugin-settings/"})}function u(t){return n({method:"PUT",url:"/wp-json/bead-config/v1/plugin-settings/",data:t})}function f(){return n({method:"GET",url:""})}function e(n,i,r,u){return t.upload({url:"/wp-json/bead-config/v1/plugin-settings/image/",data:{image:n,color:i,letter:r,product_id:u}})}var i=this;i.getSettings=r;i.saveSettings=u;i.getColorLines=f;i.uploadImage=e}angular.module("beadConfigSettings").service("beadConfigSettingsService",["$http","Upload",n])}();